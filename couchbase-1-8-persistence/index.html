<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Couchbase 1.8 Persistence" /><meta name="author" content="Iván Ádám Vári" /><meta property="og:locale" content="en" /><meta name="description" content="Couchbase 1.8 supports two types of buckets but the memcached bucket is limited, does not support persistence, failover so this article is about the couchbase bucket type and its maintenance." /><meta property="og:description" content="Couchbase 1.8 supports two types of buckets but the memcached bucket is limited, does not support persistence, failover so this article is about the couchbase bucket type and its maintenance." /><link rel="canonical" href="https://ivanvari.com/couchbase-1-8-persistence/" /><meta property="og:url" content="https://ivanvari.com/couchbase-1-8-persistence/" /><meta property="og:site_name" content="Ivan Adam Vari" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2013-05-21T13:34:53+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Couchbase 1.8 Persistence" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Iván Ádám Vári" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Iván Ádám Vári"},"dateModified":"2013-05-21T13:34:53+02:00","datePublished":"2013-05-21T13:34:53+02:00","description":"Couchbase 1.8 supports two types of buckets but the memcached bucket is limited, does not support persistence, failover so this article is about the couchbase bucket type and its maintenance.","headline":"Couchbase 1.8 Persistence","mainEntityOfPage":{"@type":"WebPage","@id":"https://ivanvari.com/couchbase-1-8-persistence/"},"url":"https://ivanvari.com/couchbase-1-8-persistence/"}</script><title>Couchbase 1.8 Persistence | Ivan Adam Vari</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ivan Adam Vari"><meta name="application-name" content="Ivan Adam Vari"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-GST9H3668K"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GST9H3668K'); </script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ivan Adam Vari</a></div><div class="site-subtitle font-italic">A minimalist SysOps/DevOps Craftsman</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/variia" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ivan.adam.vari','ivanvari.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/profile/view?id=ADEAAAZ6wwEBp7FjAqg_m7ZK8y148UI70Cyn9n8" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Couchbase 1.8 Persistence</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Couchbase 1.8 Persistence</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/variia">Iván Ádám Vári</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1369136093" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2013-05-21 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1048 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><p><a href="http://www.couchbase.com" target="_blank">Couchbase</a> 1.8 supports two types of buckets but the <em>memcached</em> bucket is limited, does not support persistence, failover so this article is about the <em>couchbase</em> bucket type and its maintenance.</p><p>We tend to forget the fact, that this bucket is persisted so every single key is saved to disk. This means you have a copy in memory (assume your resident ratio is 100%) and on disk. Depending on your cluster setup, you will likely to have at least another copy in another node’s memory and its disk. (4 copies altogether)</p><p>With the added metadata overhead, it’s fair to say that you actually need more disk space on each node than memory, to be able to fully utilise your node’s memory and you have to consider this when you size your hardware. Couchbase 2.x requires even more disk-space (2 x your RAM) per node due to the JSON indexes and changed persistence layer.</p><blockquote class="prompt-info"><div><p>The behavior/technique explained here only true up to a certain size, aka vacuum is only practical for smaller databases. For large databases (10G+ per file), it’s much more efficient to fail over the node then add it back to the cluster followed by rebalance.</p></div></blockquote><h2 id="the-keys"><span class="mr-2">The Keys</span><a href="#the-keys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Depending on what you use a <em>key-value</em> store for, it’s fairly common, that the data you store changes frequently and how long it will remain in your bucket depends on the expiry you set on creation.</p><p><em>You have to nail the expiry to prevent bloating the store or deleting important dataset too early</em></p><p>We started loading one of our high performance buckets and set the expiry initially to 30 days. Unfortunately we didn’t realize at that point, that we get more data from web visitors, than we delete (by expiry) so our bucket got bloated with approximately 500 - 600 Million keys. (39G in memory, 45G on disk per node) This pushed our resident ratio down to 24% approximately, which was not really an issue until we started actually fetching data for our testing.</p><h2 id="the-cleanup"><span class="mr-2">The Cleanup</span><a href="#the-cleanup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>We could have raised the bucket quota since we had free RAM, but we knew the bucket was bloated with stale data, so the only option we had was to clean it up. We set the expiry immediately in our code to 7 days, but it only affected newly created keys so we had to wait 4 weeks before we actually saw our store reducing in size.</p><p><img data-src="/assets/img/2013-05/971B1CF6-BE65-11E2-9FAE-001D095D855C.png" alt="Bucket" data-proofer-ignore></p><p>Our bucket <strong>started reducing</strong> in size around January <strong>but only in memory</strong>, the green area representing the disk usage remained the same.</p><p>By early February we reached our target size, but our disk was still bloated and it had to be claimed back, although it was not as simple as you may think.</p><h2 id="sql-fragmentation"><span class="mr-2">SQL Fragmentation</span><a href="#sql-fragmentation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Couchbase 1.8 uses SQLite3 to persist the data, it comes with the product installer package. The <a href="http://support.couchbase.com/entries/21724787-Understanding-SQLite-fragmentation-and-Vacuuming-of-databases" target="_blank">knowledgebase</a> (login required) from the support portal explains this very well although in real life scenario, I believe there is a little more to it.</p><h2 id="the-not-so-easy-way"><span class="mr-2">The not so Easy Way</span><a href="#the-not-so-easy-way" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Make sure you have <em>auto-failover</em> set, remove the node to be cleaned followed by <em>rebalance</em>. When finished add the node back to the cluster and complete <em>rebalance</em> again. When you initiate the <em>rebalance</em> operation the entire Couchbase data area on your disk is deleted, keys and metadata will be synced across all live nodes.</p><blockquote class="prompt-warning"><div><p>Even during off peak production, this is a very heavy operation</p></div></blockquote><p><strong>Every node</strong> will be hitting the disk hard, CPU usage will increase, response times and latency will be poor. One node took approximately 2 x 20 minutes, on our small 4 node cluster it’s 160 minutes and it’s best case scenario. When fully utilized, this could go up as high as 12 hours just to clean our 4 node cluster and it’s worth to mention that we have the fastest SSD available. The final important aspect of this method is that rebalance fails sometimes, there is a lot going on and it’s somewhat <em>normal</em> according to  <a href="http://blog.couchbase.com/top-10-things-ops-sys-admin-must-know-about-couchbase" target="_blank">another article</a>. When it does you have to start the <em>rebalance</em> all over again, and it could go on for some time until you get all your nodes cleaned. This is something we could not afford, it’s just not feasible for 24/7 operations.</p><h2 id="manual-fragmentation"><span class="mr-2">Manual fragmentation</span><a href="#manual-fragmentation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>The idea is that you essentially make the data unavailable on a single node until the <em>VACUUM</em> runs then you just suck the data back into memory from the de-fragmented store. Yes, your active-replica will not be activated and in our case (4 node cluster) 25% of our data will not be accessible at all but for us it is better than having uselessly slow 100% while <em>rebalance</em> is running.</p><p>This requires <em>auto failover</em> to be turned off, you can do it by a simple API call:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>curl <span class="s2">"http://localhost:8091/settings/autoFailover"</span> <span class="nt">-i</span> <span class="nt">-u</span> Administrator:<span class="s2">"yourpassword"</span> <span class="nt">-d</span> <span class="s1">'enabled=false'</span>
</pre></table></code></div></div><p>followed by shutting the <em>coushbase-server</em> process down. When your server process is stopped, you can then <em>VACUUM</em> the database files individually as explained in the <a href="http://support.couchbase.com/entries/21724787-Understanding-SQLite-fragmentation-and-Vacuuming-of-databases" target="_blank">knowledgebase</a> article.</p><h2 id="the-surprise"><span class="mr-2">The Surprise</span><a href="#the-surprise" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>It may fail with the following error:</p><p><code class="language-plaintext highlighter-rouge">Error: disk I/O error</code></p><p>After some reading and digging, we found that SQLite3 makes a copy of your database on the fly to <code class="language-plaintext highlighter-rouge">/var/tmp</code> then runs the VACUUM over the temporary copy, on success it copies the de-fragmented database back to its place. Our database files were ~35-40GB each and as much as we pay attention to partitioning when we build servers, we did not count that into our sizing. Not to mention that <code class="language-plaintext highlighter-rouge">/var/tmp</code> was not on SSD storage so the VACUUM was slow too, hence we ended up with the following fix for our disk layout:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>/dev/sdb1 on /opt type ext4 (rw,noatime,data=writeback,commit=120)
/opt/temp on /var/tmp type none (rw,bind)
</pre></table></code></div></div><p>Couchbase lives under <code class="language-plaintext highlighter-rouge">/opt</code> default so we mounted our fast SSD disk (sdb) there during installation, thus we just added some performance tuning options to our EXT4 file system.</p><p>Then we created a temporary folder at <code class="language-plaintext highlighter-rouge">/opt/temp</code> and mounted <code class="language-plaintext highlighter-rouge">/var/tmp</code> to it. This way we got enough space to complete the database <em>VACUUM</em> and we moved this high IO operation to our fastest drive available.</p><p>At completion, start the server process and <a href="http://www.couchbase.com/docs/couchbase-manual-1.8/couchbase-monitoring-startup.html" target="_blank">monitor</a> the warmup. This method was not only faster, but leaves 75% of our data intact and fast not to mention that we do not have to risk wasting time on <em>rebalance</em> failures. At last but not least re-enable your <em>auto failover</em> when all of your nodes are done:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>curl <span class="s2">"http://localhost:8091/settings/autoFailover"</span> <span class="nt">-i</span> <span class="nt">-u</span> Administrator:<span class="s2">"yourpassword"</span> <span class="nt">-d</span> <span class="s1">'enabled=true&amp;timeout=30'</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/nosql/'>NoSQL</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/cluster/" class="post-tag no-text-decoration" >cluster</a> <a href="/tags/couchbase/" class="post-tag no-text-decoration" >couchbase</a> <a href="/tags/nosql/" class="post-tag no-text-decoration" >nosql</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Couchbase 1.8 Persistence - Ivan Adam Vari&amp;url=https://ivanvari.com/couchbase-1-8-persistence/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Couchbase 1.8 Persistence - Ivan Adam Vari&amp;u=https://ivanvari.com/couchbase-1-8-persistence/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://ivanvari.com/couchbase-1-8-persistence/&amp;text=Couchbase 1.8 Persistence - Ivan Adam Vari" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://ivanvari.com/couchbase-1-8-persistence/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/nosql/">nosql</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cfn/">cfn</a> <a class="post-tag" href="/tags/cloudformation/">cloudformation</a> <a class="post-tag" href="/tags/hardware/">hardware</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/hands-on-with-couchbase/"><div class="card-body"> <em class="timeago small" data-ts="1368344529" > 2013-05-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hands-on with Couchbase</h3><div class="text-muted small"><p> It’s been a long a long time coming, hard work has finally paid off and the last 7 months feels like just only few weeks. Couchbase is now our primary NoSQL (key-value) store for production and we ...</p></div></div></a></div><div class="card"> <a href="/couchbase-quota-explained/"><div class="card-body"> <em class="timeago small" data-ts="1381876093" > 2013-10-16 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Couchbase Quota Explained</h3><div class="text-muted small"><p> For modern, high performance web applications we need low latency and Couchbase excels in that. To maintain the lowest possible latency even during node failure, we need to achieve 100% resident ra...</p></div></div></a></div><div class="card"> <a href="/aws-codepipeline-stuck-at-cloudformation-prepare-stage/"><div class="card-body"> <em class="timeago small" data-ts="1654426722" > 2022-06-05 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Codepipeline Stuck at Cloudformation Prepare Stage</h3><div class="text-muted small"><p> This issue puzzled me and even AWS support for weeks, although for the later it was mostly because of their availability not their skills: I pushed in an update for one of my pipeline managed s...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/hands-on-with-couchbase/" class="btn btn-outline-primary" prompt="Older"><p>Hands-on with Couchbase</p></a> <a href="/couchbase-quota-explained/" class="btn btn-outline-primary" prompt="Newer"><p>Couchbase Quota Explained</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://ivanvari.com/couchbase-1-8-persistence/'; this.page.identifier = '/couchbase-1-8-persistence/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://ivanvari-com.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/variia">Iván Ádám Vári</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/cluster/">cluster</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/nosql/">nosql</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/cfn/">cfn</a> <a class="post-tag" href="/tags/cloudformation/">cloudformation</a> <a class="post-tag" href="/tags/hardware/">hardware</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-84719456-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-84719456-1'); }); </script>
